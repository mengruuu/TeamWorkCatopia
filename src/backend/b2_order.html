<!DOCTYPE html>
<html lang="en">

<head>
    @@include('./layout/meta.html', {
    "title" : "Catopia B2訂單管理"
    })
    <link rel="stylesheet" href="../css/backend/b2_order.css">
    <script src="../js/tools/vue.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.js"></script>
    <script src="../js/backend/b2_order.js" async></script>
</head>

<body>
    @@include('./layout/backend_header.html')
    
    <div class="back_management_container">
        <aside class="back_management_list">
            <div>
                <p>B1　會員管理</p>
                <ul>
                    <li><a href="./b1_vip.html">B1-1　會員資料總覽</a></li>
                    <li><a href="./b1_black_list.html">B1-2　黑名單管理</a></li>
                </ul>
            </div>

            <div>
                <p>B2　訂單管理</p>
                <ul>
                    <li><a href="./b2_order.html">B2-1　訂單總覽</a></li>
                </ul>
            </div>

            <div>
                <p>B3　商品管理</p>
                <ul>
                    <li><a href="./b3_product.html">B3-1　商品總覽</a></li>
                </ul>
            </div>

            <div>
                <p>B4　留言板管理</p>
                <ul>
                    <li><a href="./b4_message.html">B4-1　留言板總覽</a></li>
                    <li><a href="./b4_report.html">B4-2　檢舉管理</a></li>
                </ul>
            </div>

            <div>
                <p>B5　專欄管理</p>
                <ul>
                    <li><a href="./b5_knowledge.html">B5-1　專欄推播管理</a></li>
                </ul>
            </div>

            <div>
                <p>B6　虛擬商城消費管理</p>
                <ul>
                    <li><a href="./b6_game.html">B6-1　虛擬商城消費管理</a></li>
                </ul>
            </div>

            <div>
                <p>B7　智能機器人管理</p>
                <ul>
                    <li><a href="./b7_question.html">B7-1　智能問題集管理</a></li>
                </ul>
            </div>
        </aside>


        <main class="back_order_management">
            <div class="b2_title">
                <p>B2-1　訂單總覽</p>
                <ul>
                    <li><input type="text">訂單編號</li>
                    <li>
                        <select name="order" id="order">
                            <option>訂單狀態</option>
                            <option value="1">備貨中</option>
                            <option value="2">已出貨</option>
                            <option value="3">已完成</option>
                        </select>

                        <select name="pay" id="pay">
                            <option>付款狀態</option>
                            <option value="1">未付款</option>
                            <option value="2">已付款</option>
                        </select>
                    </li>
                </ul>
            </div>

            <div id="backend_order_app">

                <backend-product></backend-product>
            
            </div>

        <!-- 
            <div class="backend_table">
                <table id="order_info">
                    <tr class="table_title">
                        <td><a href="#"></a> 訂單編號</td>
                        <td>會員編號</td>
                        <td>會員信箱</td>
                        <td>下單時間</td>
                        <td>訂單狀態</td>
                        <td>付款方式</td>
                        <td>付款狀態</td>
                        <td>訂單金額</td>
                        <td>奴幣回饋</td>
                        <td>奴幣折抵</td>
                    </tr>
                </table>
            </div> 
        -->

        </main>
    </div>

    <script>
        Vue.component("backendProduct", {
        template: `
            <div class="backend_table">
                <table id="order_info">
                    <tr class="table_title">
                        <td><a href="#"></a> 訂單編號</td>
                        <td>會員編號</td>
                        <td>會員信箱</td>
                        <td>下單時間</td>
                        <td>訂單狀態</td>
                        <td>付款方式</td>
                        <td>付款狀態</td>
                        <td>訂單金額</td>
                        <td>奴幣回饋</td>
                        <td>奴幣折抵</td>
                    </tr>

                    <tr class="table_title" v-for="(item, index) in backendOrder">
                        <td><a @click=backOrder(index) href="./b2_order_detail.html">{{item.ORDER_ID}}</a></td>
                        <td>{{item.MEMBER_ID}}</td>
                        <td>{{item.MEMBER_MAIL}}</td>
                        <td>{{item.ORDER_TIME}}</td>
                        <td>{{item.ORDER_MODE}}</td>
                        <td>{{item.PAYMENT_METHOD}}</td>
                        <td>{{item.PAYMENT_MODE}}</td>
                        <td>{{item.TOTAL_PRICE}}</td>
                        <td>{{item.COIN_GIVEBACK}}</td>
                        <td>{{item.COIN_DISCOUNT}}</td>
                    </tr>
                </table>
            </div> 
            `,
        data() {
            return {
            backendOrder: [],
            };
        },
        methods: {
            backOrder(index) {
            localStorage.setItem(
                "backendFindOrder",
                JSON.stringify(this.backendOrder[index])
            );
            },
        },

        mounted() {
            $.getJSON("./API/b2_back_get_order_info.php").then((res) => {
            // console.log(res);
            this.backendOrder = res;
            });
        },
        });
        new Vue({
            el: "#backend_order_app",
            data: {},
        });

    </script>
</body>

</html>