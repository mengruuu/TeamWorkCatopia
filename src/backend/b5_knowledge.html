<!DOCTYPE html>
<html lang="en">
  <head>
    @@include('./layout/meta.html', { "title" : "Catopia B5專欄管理" })
    <link rel="stylesheet" href="../css/backend/b5_knowledge.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.js"></script>
  </head>

  <body>
    @@include('./layout/backend_header.html')

    <div class="back_management_container">
      <aside class="back_management_list">
        <div>
          <p>B1　會員管理</p>
          <ul>
            <li><a href="./b1_vip.html">B1-1　會員資料總覽</a></li>
            <li><a href="./b1_black_list.html">B1-2　黑名單管理</a></li>
          </ul>
        </div>

        <div>
          <p>B2　訂單管理</p>
          <ul>
            <li><a href="./b2_order.html">B2-1　訂單總覽</a></li>
          </ul>
        </div>

        <div>
          <p>B3　商品管理</p>
          <ul>
            <li><a href="./b3_product.html">B3-1　商品總覽</a></li>
          </ul>
        </div>

        <div>
          <p>B4　留言板管理</p>
          <ul>
            <li><a href="./b4_message.html">B4-1　留言板總覽</a></li>
            <li><a href="./b4_report.html">B4-2　檢舉管理</a></li>
          </ul>
        </div>

        <div>
          <p>B5　專欄管理</p>
          <ul>
            <li><a href="./b5_knowledge.html">B5-1　專欄推播管理</a></li>
          </ul>
        </div>

        <div>
          <p>B6　虛擬商城消費管理</p>
          <ul>
            <li><a href="./b6_game.html">B6-1　虛擬商城消費管理</a></li>
          </ul>
        </div>

        <div>
          <p>B7　智能機器人管理</p>
          <ul>
            <li><a href="./b7_question.html">B7-1　智能問題集管理</a></li>
          </ul>
        </div>
      </aside>

      <main class="back_knowledge_management">
        <div class="b5_title">
          <p>B5-1　專欄推播管理</p>
        </div>
        <div class="backend_table" id="back_knowledge_management_app">
          <backend-knowledge></backend-knowledge>
        </div>
      </main>
    </div>
    <script>
      Vue.component("backendKnowledge", {
        template: `
    <div class="backend_table">
        <table>
            <tr class="table_title">
                <td class="number">文章序號</td>
                <td>文章圖片</td>
                <td>文章標題</td>
                <td>文章內容</td>
                <td>編輯/修改</td>
            </tr>
            <tr v-for="(item, index) in knowledgeData">
                <td class="number">{{item.ARTICLE_ID}}</td>
                <td><img :src = item.ARTICLE_PICTURE></td>
                <td>{{item.ARTICLE_TITLE}}</td>
                <td>{{item.ARTICLE_CONTENT}}</td>
                <td class="number"><a @click=toKnowledgeContent(index) href="./b5_knowledge_edit.html" ><img src="../images/backend/edit.png"></a></td>
            </tr>
        </table>
    </div>
    `,
        data() {
          return {
            knowledgeData: [],
          };
        },
        methods: {
            toKnowledgeContent(index) {
            localStorage.setItem(
              "toKnowledgeContent",
              JSON.stringify(this.knowledgeData[index])
            );
          },
        },

        mounted() {
          $.getJSON("./API/b5_knowledge.php").then((res) => {
            console.log(res);
            this.knowledgeData = res;
          });
        },
      });
      new Vue({
        el: "#back_knowledge_management_app",
        data: {

        },
      });
    </script>
  </body>
</html>
